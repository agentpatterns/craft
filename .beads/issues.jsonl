{"id":"craft-2eq","title":"P5: Delete Scaffolder Plugin","description":"## Agent Task: Delete Scaffolder Plugin (Phase 5)\n\n**Role:** Remove the scaffolder plugin directory after verifying all content migrated.\n\n### Agent Context\n- **Pre-check:** Verify `plugins/crafter/skills/` contains exactly 12 skill directories: tdd, craft, refactor, reflect, pair, draft, research, tidy, diagram, scaffold, hexagonal-architecture, adr\n- **Commands to run:** `rm -rf plugins/scaffolder/`\n- **Post-check:** Verify `plugins/scaffolder/` does not exist; verify `plugins/crafter/skills/` still has 12 entries\n- **Acceptance gate:** scaffolder directory gone; 12 skill directories confirmed under crafter","status":"closed","priority":1,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-23T18:51:54Z","created_by":"ericjohnolson","updated_at":"2026-02-23T21:18:19Z","closed_at":"2026-02-23T21:18:19Z","close_reason":"Closed","labels":["no-test","rpi-phase"],"dependencies":[{"issue_id":"craft-2eq","depends_on_id":"craft-5v2","type":"parent-child","created_at":"2026-02-23T10:52:04Z","created_by":"ericjohnolson","metadata":"{}"},{"issue_id":"craft-2eq","depends_on_id":"craft-a1q","type":"blocks","created_at":"2026-02-23T10:52:06Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-3b3","title":"P6: Grading Rubrics — structured-output + behavioral","description":"## Agent Task: Grading Rubrics (Phase 6)\n\n**Role:** Create reusable grading rubrics for both skill categories.\n\n### Agent Context\n- **Files to create:** `tests/rubrics/structured-output.md`, `tests/rubrics/behavioral.md`\n- **Files to read:** `docs/plans/2026-02-23-skill-testing-research.md` (Categories A-D, Findings 2-3), completed scenario files in `tests/scenarios/`\n- **Acceptance gate:** Both rubric files exist; structured rubric covers file/section/structure/quantitative checks; behavioral rubric includes judge prompt template with scoring dimensions and pass/fail thresholds\n- **Constraints:** Rubrics must be usable by both humans (manual review) and automation (test runner); structured rubric criteria should be automatable (regex, file checks)\n\n### Instructions\n1. Read research artifact for grading tier recommendations (Finding 2)\n2. Read completed scenario files to understand what assertions are being made\n3. Create `tests/rubrics/structured-output.md`:\n   - File existence checks (path patterns)\n   - Required section presence (regex/string match patterns)\n   - Structural validation (YAML parseable, correct nesting, frontmatter valid)\n   - Quantitative checks (line count ranges, array lengths, section counts)\n   - Map each check type to the skills it applies to (research, draft, craft, tdd)\n4. Create `tests/rubrics/behavioral.md`:\n   - Evaluation prompt template for LLM-as-judge\n   - Scoring dimensions (relevance, completeness, actionability, specificity)\n   - Pass/fail thresholds per dimension and overall\n   - Example judge prompt for reflect skill with expected scoring\n   - Map to skills that need it (reflect, and future: pair)\n\n### Report\n- Files created: [list paths]\n- Structured rubric check types: [count]\n- Behavioral rubric scoring dimensions: [list]\n- Acceptance gate status: PASS or FAIL","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-24T18:12:38Z","created_by":"ericjohnolson","updated_at":"2026-02-24T19:58:43Z","closed_at":"2026-02-24T19:58:43Z","close_reason":"Closed","labels":["no-test","rpi-phase"],"dependencies":[{"issue_id":"craft-3b3","depends_on_id":"craft-93y","type":"blocks","created_at":"2026-02-24T10:12:49Z","created_by":"ericjohnolson","metadata":"{}"},{"issue_id":"craft-3b3","depends_on_id":"craft-b83","type":"parent-child","created_at":"2026-02-24T10:12:55Z","created_by":"ericjohnolson","metadata":"{}"},{"issue_id":"craft-3b3","depends_on_id":"craft-ca6","type":"blocks","created_at":"2026-02-24T10:12:49Z","created_by":"ericjohnolson","metadata":"{}"},{"issue_id":"craft-3b3","depends_on_id":"craft-j51","type":"blocks","created_at":"2026-02-24T10:12:50Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-49y","title":"Fix: run-scenarios.sh fails inside Claude Code sessions (CLAUDECODE env var)","description":"## Problem\n\n`claude --print` cannot be invoked from inside a Claude Code session because the CLAUDECODE environment variable triggers a nested-session guard:\n\n```\nError: Claude Code cannot be launched inside another Claude Code session.\nNested sessions share runtime resources and will crash all active sessions.\nTo bypass this check, unset the CLAUDECODE environment variable.\n```\n\nThe script suppresses this error with `2\u003e/dev/null` on line 292, causing silent `ERROR` returns for every test.\n\n## Fix\n\nAdd `env -u CLAUDECODE` before all `claude` invocations in the script, or unset `CLAUDECODE` at the top of `main()`. This allows the script to work both inside and outside Claude Code sessions.\n\n## Files\n- `tests/runner/run-scenarios.sh` — lines 292, 424","status":"closed","priority":0,"issue_type":"bug","owner":"ericjolson@gmail.com","created_at":"2026-02-24T21:53:26Z","created_by":"ericjohnolson","updated_at":"2026-02-24T21:56:47Z","closed_at":"2026-02-24T21:56:47Z","close_reason":"Closed"}
{"id":"craft-5sm","title":"P1: Create likec4-c4 skill — structural C4 diagrams","description":"## Agent Task: Create likec4-c4 Skill (Phase 1)\n\n**Role:** Create the structural C4 diagram skill with LikeC4 DSL reference material.\n\n### Agent Context\n- **Files to create:**\n  - `plugins/scaffolder/skills/likec4-c4/SKILL.md`\n  - `plugins/scaffolder/skills/likec4-c4/references/dsl-syntax.md`\n  - `plugins/scaffolder/skills/likec4-c4/references/view-examples.md`\n  - `plugins/scaffolder/skills/likec4-c4/references/style-guide.md`\n- **Files to read for conventions:** `plugins/scaffolder/skills/adr/SKILL.md`, `plugins/scaffolder/skills/hexagonal-architecture/SKILL.md`\n- **Source material:** `docs/plans/2026-02-22-likec4-diagram-skills-research.md` (Section 2: LikeC4 Tool Overview)\n- **Acceptance gate:** SKILL.md exists, is under 300 lines, has correct YAML frontmatter (name, description, triggers, allowed-tools: Read Glob Write), references all 3 reference files\n- **Architectural constraints:** SKILL.md contains workflow and decision logic only; all DSL syntax examples go in references/\n\n### Instructions\n1. Read existing scaffolder skills (adr, hexagonal-architecture) for frontmatter and style conventions\n2. Read the research artifact for LikeC4 DSL syntax and view types\n3. Create references/dsl-syntax.md — specification block, element kinds, relationships, predicates\n4. Create references/view-examples.md — context, container, component, deployment view examples\n5. Create references/style-guide.md — styling predicates, colors, shapes\n6. Create SKILL.md — interactive workflow: gather system context → choose view level → generate .likec4 file → review\n7. Verify SKILL.md is under 300 lines\n8. Verify all reference files are linked from SKILL.md\n\n### Report\n- Files created: [list paths]\n- SKILL.md line count: [number]\n- Acceptance gate status: PASS or FAIL","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-23T00:51:48Z","created_by":"ericjohnolson","updated_at":"2026-02-23T01:01:02Z","closed_at":"2026-02-23T01:01:02Z","close_reason":"Closed","labels":["no-test"]}
{"id":"craft-5v2","title":"Plugin Consolidation","description":"Consolidate crafter + scaffolder into single crafter plugin v2.0.0 with subtype dispatch for diagram (3→1) and scaffold (1→1) skills","status":"closed","priority":1,"issue_type":"epic","owner":"ericjolson@gmail.com","created_at":"2026-02-23T18:51:22Z","created_by":"ericjohnolson","updated_at":"2026-02-23T21:19:16Z","closed_at":"2026-02-23T21:19:16Z","close_reason":"All children completed"}
{"id":"craft-6i9","title":"P2: Create likec4-dynamic skill — workload flow diagrams","description":"## Agent Task: Create likec4-dynamic Skill (Phase 2)\n\n**Role:** Create the workload flow diagram skill using LikeC4 dynamic views.\n\n### Agent Context\n- **Files to create:**\n  - `plugins/scaffolder/skills/likec4-dynamic/SKILL.md`\n  - `plugins/scaffolder/skills/likec4-dynamic/references/dsl-syntax.md`\n  - `plugins/scaffolder/skills/likec4-dynamic/references/flow-examples.md`\n- **Files to read for conventions:** `plugins/scaffolder/skills/adr/SKILL.md`, `plugins/scaffolder/skills/likec4-c4/SKILL.md` (created in Phase 1)\n- **Source material:** `docs/plans/2026-02-22-likec4-diagram-skills-research.md` (Section 2: Dynamic view syntax)\n- **Acceptance gate:** SKILL.md exists, is under 300 lines, has correct YAML frontmatter (name, description, triggers, allowed-tools: Read Glob Write), references all 2 reference files\n- **Architectural constraints:** SKILL.md contains workflow only; DSL syntax in references/. Must not duplicate structural C4 content — link to likec4-c4 for shared model concepts (specification block, element kinds).\n\n### Instructions\n1. Read the likec4-c4 skill (Phase 1 output) to understand shared model concepts\n2. Read the research artifact for dynamic view syntax, parallel blocks, sequence variant\n3. Create references/dsl-syntax.md — dynamic view syntax, message ordering, parallel blocks, sequence variant, navigateTo\n4. Create references/flow-examples.md — example flows: request/response, parallel fan-out, error paths\n5. Create SKILL.md — interactive workflow: identify scenario → list participants → map interactions → generate dynamic view → review\n6. Ensure SKILL.md links to likec4-c4 for model setup rather than duplicating specification/model syntax\n7. Verify SKILL.md is under 300 lines\n\n### Report\n- Files created: [list paths]\n- SKILL.md line count: [number]\n- Acceptance gate status: PASS or FAIL","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-23T00:51:57Z","created_by":"ericjohnolson","updated_at":"2026-02-23T01:04:10Z","closed_at":"2026-02-23T01:04:10Z","close_reason":"Closed","labels":["no-test"],"dependencies":[{"issue_id":"craft-6i9","depends_on_id":"craft-5sm","type":"blocks","created_at":"2026-02-22T16:52:26Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-7dd","title":"P3: Create data-flow skill — DFDs via Mermaid","description":"## Agent Task: Create data-flow Skill (Phase 3)\n\n**Role:** Create the traditional DFD skill using Mermaid flowchart notation.\n\n### Agent Context\n- **Files to create:**\n  - `plugins/scaffolder/skills/data-flow/SKILL.md`\n  - `plugins/scaffolder/skills/data-flow/references/dfd-notation.md`\n  - `plugins/scaffolder/skills/data-flow/references/dfd-examples.md`\n- **Files to read for conventions:** `plugins/scaffolder/skills/adr/SKILL.md`, `plugins/scaffolder/skills/likec4-c4/SKILL.md` (from Phase 1)\n- **Source material:** `docs/plans/2026-02-22-likec4-diagram-skills-research.md` (Section 1: DFD vs Workload Flow comparison)\n- **Acceptance gate:** SKILL.md exists, is under 300 lines, has correct YAML frontmatter (name, description, triggers, allowed-tools: Read Glob Write), references all 2 reference files\n- **Architectural constraints:** Must use Mermaid flowchart notation, not LikeC4 (LikeC4 has no native DFD support). Include guidance on when DFD is the right choice vs C4 or dynamic views.\n\n### Instructions\n1. Read existing scaffolder skills for conventions\n2. Read the research artifact Section 1 for DFD vs C4/dynamic distinction\n3. Create references/dfd-notation.md — DFD notation mapped to Mermaid: processes (rounded rect), data stores (cylinder), external entities (rectangle), data flows (arrows with labels)\n4. Create references/dfd-examples.md — context-level and detailed-level DFD examples in Mermaid\n5. Create SKILL.md — interactive workflow: identify system boundary → list external entities → map data stores → trace data flows → generate Mermaid DFD → review\n6. Include clear guidance on when to use DFD vs C4 structural vs dynamic views\n7. Verify SKILL.md is under 300 lines\n\n### Report\n- Files created: [list paths]\n- SKILL.md line count: [number]\n- Acceptance gate status: PASS or FAIL","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-23T00:52:05Z","created_by":"ericjohnolson","updated_at":"2026-02-23T01:04:10Z","closed_at":"2026-02-23T01:04:10Z","close_reason":"Closed","labels":["no-test"],"dependencies":[{"issue_id":"craft-7dd","depends_on_id":"craft-5sm","type":"blocks","created_at":"2026-02-22T16:52:27Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-7td","title":"P5: Delete Old Runner","description":"## Agent Task: Delete Old Runner (Phase 5)\n\n**Role:** Remove the superseded 754-line bash test runner.\n\n### Agent Context\n- **Files to delete:** `tests/runner/run-scenarios.sh`, `tests/runner/` (directory)\n- **Commands to run:** `rm tests/runner/run-scenarios.sh \u0026\u0026 rmdir tests/runner`\n- **Acceptance gate:** `tests/runner/` directory no longer exists; `find . -path \"*/runner/run-scenarios.sh\"` returns nothing\n\n### Instructions\n1. Delete `tests/runner/run-scenarios.sh`\n2. Remove `tests/runner/` directory\n3. Verify deletion\n\n### Report\n- Deleted: tests/runner/run-scenarios.sh\n- Directory removed: tests/runner/\n- Verification: find returns nothing","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-25T19:53:28Z","created_by":"ericjohnolson","updated_at":"2026-02-25T20:17:37Z","closed_at":"2026-02-25T20:17:37Z","close_reason":"Deleted tests/runner/run-scenarios.sh and tests/runner/ directory. Verified removal.","labels":["no-test","rpi-phase"],"dependencies":[{"issue_id":"craft-7td","depends_on_id":"craft-cj8","type":"blocks","created_at":"2026-02-25T11:53:38Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-80y","title":"P2: Create references/ files (fitness tests + code templates)","description":"## Agent Task: Create References (Phase 2)\n\n**Role:** Create reference files for fitness test templates and code templates.\n\n### Agent Context\n- **Files to create:** plugins/scaffolder/skills/scaffold-ts/references/fitness-tests.md, plugins/scaffolder/skills/scaffold-ts/references/code-templates.md\n- **Files to read:** plugins/scaffolder/skills/scaffold-ts/SKILL.md (for consistency)\n\n**fitness-tests.md content:**\n- architecture.test.ts spec: dependency direction (domain must not depend on infrastructure/application), bounded context isolation (no cross-context imports)\n- naming.test.ts spec: file naming conventions for aggregates (-aggregate.ts), repositories (-repository.ts), infrastructure (in-memory- prefix or -adapter.ts suffix), events (-event.ts), value objects (in value-objects/ dir)\n- complexity.test.ts spec: LOC limits (300 all, 200 domain/infra), LCOM96b \u003c 0.5 for application services and domain aggregates\n- coupling.test.ts spec: coupling factor \u003c 0.3 (overall, application, infrastructure), distance from main sequence \u003c 0.5 (application, domain, all modules)\n- All use archunit npm package with allowEmptyTests: true\n\n**code-templates.md content:**\n- Shared kernel EventBus interface and DomainEvent type (exact TypeScript)\n- InMemoryEventBus implementation notes\n- Domain event union pattern with type discriminant\n- Zod input validation pattern with ZodError -\u003e INVALID_INPUT error code mapping\n\n- **Acceptance gate:** Both files exist; fitness-tests.md covers all 4 test files; code-templates.md covers shared kernel, domain events, Zod patterns\n- **Architectural constraints:** Content must match user original definition; no invented behavior","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-23T06:26:15Z","created_by":"ericjohnolson","updated_at":"2026-02-23T06:34:26Z","closed_at":"2026-02-23T06:34:26Z","close_reason":"Both reference files created with all required sections","labels":["no-test","rpi-phase"],"dependencies":[{"issue_id":"craft-80y","depends_on_id":"craft-dnj","type":"blocks","created_at":"2026-02-22T22:26:28Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-8vx","title":"Fix: run-scenarios.sh swallows stderr, masking invocation errors","description":"## Problem\n\nLines 292 and 424 use `2\u003e/dev/null` on the `claude` invocation, which hides all errors including:\n- Missing `claude` binary\n- Authentication failures\n- The CLAUDECODE nested session guard\n- API rate limits or network errors\n\nWhen claude fails, the output is the literal string \"ERROR\" from the `|| echo \"ERROR\"` fallback, but no diagnostic information is preserved.\n\n## Fix\n\nCapture stderr to a variable or temp file alongside stdout. On failure, display stderr in verbose mode and include it in the FAIL output. At minimum, remove `2\u003e/dev/null` and let errors surface.\n\n## Files\n- `tests/runner/run-scenarios.sh` — lines 292, 424","status":"closed","priority":0,"issue_type":"bug","owner":"ericjolson@gmail.com","created_at":"2026-02-24T21:53:26Z","created_by":"ericjohnolson","updated_at":"2026-02-24T21:56:47Z","closed_at":"2026-02-24T21:56:47Z","close_reason":"Closed"}
{"id":"craft-93y","title":"P4: Functional Scenarios — craft \u0026 tdd skills","description":"## Agent Task: Functional Scenarios — Craft and TDD (Phase 4)\n\n**Role:** Add functional test scenarios (Given/When/Then) for the two execution-discipline skills.\n\n### Agent Context\n- **Files to modify:** `tests/scenarios/craft.yaml`, `tests/scenarios/tdd.yaml`\n- **Files to read:** `docs/plans/2026-02-23-skill-testing-research.md` (Testable Contracts section), `plugins/crafter/skills/craft/SKILL.md`, `plugins/crafter/skills/tdd/SKILL.md`, `tests/README.md` (YAML format spec)\n- **Acceptance gate:** Both YAML files have `functional[]` section with 3+ scenarios each; craft scenarios cover gate pass + gate fail paths; TDD scenarios cover ZOMBIES letter coverage\n- **Constraints:** Craft gate scenarios need both pass and fail expectations; TDD must test phase separation (RED before GREEN)\n\n### Craft Skill — Testable Contracts\n- `craft-execution-log.md` created with structured entries\n- Gate evaluation: RED fail = hard stop; GREEN fail = proceed to validate\n- Lint fast path: biome-only failures auto-fixed before remediation\n- Max 2 remediation attempts before escalation\n- Final verification: full test suite passes\n\n### TDD Skill — Testable Contracts\n- `tdd-session-log.md` created before any code\n- `[TEST]` comments written as first artifact (before production code)\n- Every ZOMBIES letter (Z/O/M/B/I/E/S) appears at least once\n- Phase separation enforced: failing test written before implementation\n- No production code without a test requiring it\n\n### Instructions\n1. Read tests/README.md for the YAML format spec\n2. Read research artifact Testable Contracts section\n3. Read each skills SKILL.md for workflow details\n4. For craft: write 3+ functional scenarios covering execution log creation, gate pass path, gate fail path (RED fail = stop, GREEN fail = remediate), lint fast path, remediation limit\n5. For tdd: write 3+ functional scenarios covering session log creation, ZOMBIES coverage, phase separation, test-before-code discipline\n6. Each scenario: Given/When/Then with grading method\n\n### Report\n- Scenarios added per skill: [count]\n- Acceptance gate status: PASS or FAIL","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-24T18:12:37Z","created_by":"ericjohnolson","updated_at":"2026-02-24T19:55:28Z","closed_at":"2026-02-24T19:55:28Z","close_reason":"Closed","labels":["no-test","rpi-phase"],"dependencies":[{"issue_id":"craft-93y","depends_on_id":"craft-a98","type":"blocks","created_at":"2026-02-24T10:12:48Z","created_by":"ericjohnolson","metadata":"{}"},{"issue_id":"craft-93y","depends_on_id":"craft-b83","type":"parent-child","created_at":"2026-02-24T10:12:54Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-98u","title":"Fix: trigger test YES/NO grep is fragile","description":"## Problem\n\nLines 299 and 308 use `grep -qi \"^yes\"` and `grep -qi \"^no\"` to determine pass/fail. This breaks when:\n- Claude responds with \"Yes, I would...\" (works) but \"Absolutely, yes\" (fails — doesn't start with YES)\n- Claude adds a preamble before the answer\n- Claude responds with explanations instead of bare YES/NO\n- The response is empty or an error string\n\n## Fix\n\nUse a more robust pattern match:\n- Search anywhere in the response, not just line start: `grep -qi \"yes\"` \n- Or use a more structured approach: parse first word, normalize to lowercase, check membership in yes/no sets\n- Consider adding a `--model` flag to use a cheaper model (Haiku) for trigger classification since it only needs YES/NO\n\n## Files\n- `tests/runner/run-scenarios.sh` — lines 299, 308","status":"closed","priority":2,"issue_type":"bug","owner":"ericjolson@gmail.com","created_at":"2026-02-24T21:53:27Z","created_by":"ericjohnolson","updated_at":"2026-02-24T21:56:47Z","closed_at":"2026-02-24T21:56:47Z","close_reason":"Closed"}
{"id":"craft-9jn","title":"P1: Test Infrastructure — directory structure, README, YAML format","description":"## Agent Task: Test Infrastructure (Phase 1)\n\n**Role:** Create test directory structure, README with methodology, and YAML format definition.\n\n### Agent Context\n- **Files to create:** `tests/README.md`\n- **Files to read:** `AGENTS.md` (Testing Skills section), `docs/plans/2026-02-23-skill-testing-research.md`\n- **Acceptance gate:** README exists with methodology (three testing areas), YAML format spec with field definitions, and example scenario\n- **Constraints:** Keep README under 150 lines; format spec must cover triggering (positive/negative arrays) and functional (Given/When/Then with grading method) sections; reference research findings 1-5\n\n### Instructions\n1. Read AGENTS.md Testing Skills section for existing methodology\n2. Read research artifact for proposed test structure and gap analysis\n3. Create `tests/` directory\n4. Write `tests/README.md` covering: three testing areas (Triggering, Functional, Performance), YAML scenario format spec with all field definitions, grading tiers (code \u003e LLM-judge \u003e human), Claude A/B method reference, how to run tests (manual + automated)\n5. Include a complete example scenario in the README to define the YAML schema by example\n\n### Report\n- Files created: [list paths]\n- Acceptance gate status: PASS or FAIL","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-24T18:12:35Z","created_by":"ericjohnolson","updated_at":"2026-02-24T19:51:05Z","closed_at":"2026-02-24T19:51:05Z","close_reason":"Closed","labels":["no-test","rpi-phase"],"dependencies":[{"issue_id":"craft-9jn","depends_on_id":"craft-b83","type":"parent-child","created_at":"2026-02-24T10:12:53Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-a1q","title":"P4: Update Config and Docs","description":"## Agent Task: Update Config and Docs (Phase 4)\n\n**Role:** Update marketplace.json and CLAUDE.md to reflect consolidated single-plugin structure.\n\n### Agent Context\n- **Files to modify:**\n  - `.claude-plugin/marketplace.json` — Remove scaffolder entry; set marketplace metadata.version to 2.0.0; set crafter plugin version to 2.0.0; update crafter description to mention all skill categories\n  - `CLAUDE.md` — Update project structure section: change from two plugins to one; list all 12 skills under crafter (research, draft, craft, tdd, refactor, reflect, tidy, pair, diagram, scaffold, hexagonal-architecture, adr); update installation commands if needed\n- **Acceptance gate:** marketplace.json has single plugin entry at v2.0.0; CLAUDE.md skill list matches actual directory contents (12 skills)","status":"closed","priority":1,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-23T18:51:54Z","created_by":"ericjohnolson","updated_at":"2026-02-23T21:18:00Z","closed_at":"2026-02-23T21:18:00Z","close_reason":"Closed","labels":["no-test","rpi-phase"],"dependencies":[{"issue_id":"craft-a1q","depends_on_id":"craft-5v2","type":"parent-child","created_at":"2026-02-23T10:52:03Z","created_by":"ericjohnolson","metadata":"{}"},{"issue_id":"craft-a1q","depends_on_id":"craft-cay","type":"blocks","created_at":"2026-02-23T10:52:04Z","created_by":"ericjohnolson","metadata":"{}"},{"issue_id":"craft-a1q","depends_on_id":"craft-ed8","type":"blocks","created_at":"2026-02-23T10:52:05Z","created_by":"ericjohnolson","metadata":"{}"},{"issue_id":"craft-a1q","depends_on_id":"craft-z7r","type":"blocks","created_at":"2026-02-23T10:52:05Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-a98","title":"P2: Trigger Scenarios — 5 skills (research, draft, craft, tdd, reflect)","description":"## Agent Task: Trigger Scenarios (Phase 2)\n\n**Role:** Create trigger test datasets for all 5 skills with positive and negative phrases.\n\n### Agent Context\n- **Files to create:** `tests/scenarios/research.yaml`, `tests/scenarios/draft.yaml`, `tests/scenarios/craft.yaml`, `tests/scenarios/tdd.yaml`, `tests/scenarios/reflect.yaml`\n- **Files to read:** Each skills SKILL.md frontmatter (description + triggers fields): `plugins/crafter/skills/research/SKILL.md`, `plugins/crafter/skills/draft/SKILL.md`, `plugins/crafter/skills/craft/SKILL.md`, `plugins/crafter/skills/tdd/SKILL.md`, `plugins/crafter/skills/reflect/SKILL.md`\n- **Also read:** `tests/README.md` for YAML format spec\n- **Acceptance gate:** All 5 YAML files exist with `triggering.positive[]` and `triggering.negative[]` arrays, at least 10 trigger phrases per skill (5+ positive, 5+ negative)\n- **Constraints:** Test the `description` field (not `triggers` array) — description is the testable unit. Negative triggers must include phrases that should activate a different skill. Include edge cases: ambiguous phrases, partial matches, cross-skill confusion.\n\n### Instructions\n1. Read tests/README.md for the YAML format spec\n2. Read each skills SKILL.md frontmatter for description and triggers\n3. For each skill, write 5+ positive triggers (phrases that SHOULD activate the skill)\n4. For each skill, write 5+ negative triggers (phrases that should NOT activate it, including phrases for sibling skills)\n5. Include edge cases: ambiguous phrases that could match multiple skills\n\n### Report\n- Files created: [list paths]\n- Trigger count per skill: [skill: N positive, N negative]\n- Acceptance gate status: PASS or FAIL","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-24T18:12:36Z","created_by":"ericjohnolson","updated_at":"2026-02-24T19:53:17Z","closed_at":"2026-02-24T19:53:17Z","close_reason":"Closed","labels":["no-test","rpi-phase"],"dependencies":[{"issue_id":"craft-a98","depends_on_id":"craft-9jn","type":"blocks","created_at":"2026-02-24T10:12:47Z","created_by":"ericjohnolson","metadata":"{}"},{"issue_id":"craft-a98","depends_on_id":"craft-b83","type":"parent-child","created_at":"2026-02-24T10:12:54Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-aao","title":"P1: Create Deterministic Local Test Runner","description":"## Agent Task: Create Deterministic Local Test Runner (Phase 1)\n\n**Role:** Create `tests/local/validate-skills.sh` — a fast, deterministic test runner for skill structure and trigger validation.\n\n### Agent Context\n- **Files to create:** `tests/local/validate-skills.sh`\n- **Files to read:** `plugins/crafter/skills/*/SKILL.md`, `tests/scenarios/*.yaml`, `tests/rubrics/*.md`\n- **Commands to run:** `chmod +x tests/local/validate-skills.sh \u0026\u0026 bash tests/local/validate-skills.sh`\n- **Acceptance gate:** Script exits 0 with all checks passing; exits non-zero when a check fails\n- **Architectural constraints:** Shell script only. Dependencies: `yq`, `grep`, `wc`. No `claude` CLI invocations. No network calls.\n\n### Checks to Implement\n1. **Skill structure validation:** Each skill dir under `plugins/crafter/skills/` has `SKILL.md` with valid YAML frontmatter containing `name`, `description`, `triggers`, `allowed-tools`\n2. **Description constraints:** `description` \u003c 1024 chars, no XML angle brackets\n3. **Trigger validation:** `triggers` is a non-empty array, each trigger is multi-word (no bare single-word triggers)\n4. **Name consistency:** Frontmatter `name` matches directory name (kebab-case)\n5. **Line count:** `SKILL.md` ≤ 300 lines\n6. **Trigger phrase matching:** All positive trigger phrases from existing scenario YAMLs match against skill `description` via regex/string containment (no API call)\n7. **YAML schema validation:** All scenario files in `tests/scenarios/` have required fields (`skill`, `category`, `triggers.positive`, `triggers.negative`, `functional`)\n8. **Rubric completeness:** Every skill with scenarios has entries in the appropriate rubric file\n\n### Instructions\n1. Read existing skill files to understand frontmatter patterns\n2. Read existing scenario YAMLs to understand schema\n3. Write the shell script with TAP-like output\n4. Run and verify all current skills pass\n5. Intentionally break a frontmatter field and verify failure detection\n\n### Report\n- Script path: tests/local/validate-skills.sh\n- Check count: [number of checks]\n- Runtime: [seconds]\n- All skills pass: YES/NO","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-25T19:53:27Z","created_by":"ericjohnolson","updated_at":"2026-02-25T20:10:33Z","closed_at":"2026-02-25T20:10:33Z","close_reason":"Script created at tests/local/validate-skills.sh. 217 checks across 8 categories. Runs deterministically with yq/grep/wc. Failure detection verified.","labels":["no-test","rpi-phase"]}
{"id":"craft-aw1","title":"P3: Verify scaffold-ts skill structure","description":"## Agent Task: Verify skill structure (Phase 3)\n\n**Role:** Verify the complete scaffold-ts skill is correct and complete.\n\n### Agent Context\n- **Files to read:** All files in plugins/scaffolder/skills/scaffold-ts/\n- **Checks:**\n  1. SKILL.md line count \u003c 300\n  2. Frontmatter matches scaffolder convention (compare with plugins/scaffolder/skills/adr/SKILL.md)\n  3. All reference links in SKILL.md resolve to existing files\n  4. No content lost from user original definition — all sections present across SKILL.md + references\n  5. allowed-tools includes Bash (unlike other scaffolder skills)\n- **Acceptance gate:** All checks pass","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-23T06:26:16Z","created_by":"ericjohnolson","updated_at":"2026-02-23T06:35:00Z","closed_at":"2026-02-23T06:35:00Z","close_reason":"All 5 verification checks passed","labels":["agent-validate","rpi-phase"],"dependencies":[{"issue_id":"craft-aw1","depends_on_id":"craft-80y","type":"blocks","created_at":"2026-02-22T22:26:29Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-b83","title":"Skill Testing Framework","description":"Epic: Create structured testing framework for 5 crafter skills (research, draft, craft, tdd, reflect) with YAML scenarios, grading rubrics, and automation scaffold.","status":"closed","priority":2,"issue_type":"epic","owner":"ericjolson@gmail.com","created_at":"2026-02-24T18:11:40Z","created_by":"ericjohnolson","updated_at":"2026-02-24T20:01:13Z","closed_at":"2026-02-24T20:01:13Z","close_reason":"Closed"}
{"id":"craft-bs8","title":"Fix: functional test grading always SKIPs — no automated code-grade checks","description":"## Problem\n\nThe `_run_single_functional_test()` function (lines 433-451) marks ALL functional scenarios as SKIP regardless of grading type:\n- `code` grading prints \"[CODE-GRADE] Filesystem assertions require post-run inspection\" → SKIP\n- `llm-judge` prints \"[LLM-JUDGE] Output requires LLM-as-judge evaluation\" → SKIP\n- `human` prints \"[HUMAN] Output requires human review\" → SKIP\n\nFor `code`-graded scenarios, the `then[]` assertions describe automatable checks (file existence, section presence, string matching) that the script could actually evaluate. The structured-output rubric in `tests/rubrics/structured-output.md` defines the exact check types and patterns.\n\n## Fix\n\nFor `code`-graded scenarios, implement the check types from the structured-output rubric:\n- `file-exists`: Check if the output file exists at the expected path\n- `section-present`: Grep for section headers in the output\n- `string-match`: Check for required strings/patterns\n- `quantitative`: Count lines, sections, array items\n\nFor `llm-judge` scenarios, feed the output + judge_prompt to a second Claude call and parse the score.\n\n## Files\n- `tests/runner/run-scenarios.sh` — `_run_single_functional_test()` lines 433-451\n- `tests/rubrics/structured-output.md` — defines automatable check patterns","status":"closed","priority":1,"issue_type":"feature","owner":"ericjolson@gmail.com","created_at":"2026-02-24T21:53:28Z","created_by":"ericjohnolson","updated_at":"2026-02-24T21:56:47Z","closed_at":"2026-02-24T21:56:47Z","close_reason":"Closed"}
{"id":"craft-c8p","title":"P4: Final verification — all three skills","description":"## Agent Task: Final Verification (Phase 4)\n\n**Role:** Verify all three skills are complete, consistent, and follow conventions. Do NOT create or modify files.\n\n### Agent Context\n- **Files to check:**\n  - `plugins/scaffolder/skills/likec4-c4/SKILL.md` + references/\n  - `plugins/scaffolder/skills/likec4-dynamic/SKILL.md` + references/\n  - `plugins/scaffolder/skills/data-flow/SKILL.md` + references/\n- **Acceptance gate:** All of the following:\n  1. All three SKILL.md files exist and are under 300 lines\n  2. All YAML frontmatter is consistent (name, description, triggers, allowed-tools: Read Glob Write)\n  3. All reference files exist and are linked from their SKILL.md\n  4. No duplicate content across skills (likec4-dynamic links to likec4-c4 for model setup)\n  5. data-flow skill explains DFD vs C4 distinction\n  6. Cross-references between skills are correct\n\n### Instructions\n1. Read all three SKILL.md files and count lines\n2. Verify frontmatter consistency\n3. Read all reference files, confirm they exist and are linked\n4. Check for content duplication across skills\n5. Verify cross-references are correct\n\n### Report\n- likec4-c4 SKILL.md: [line count] lines\n- likec4-dynamic SKILL.md: [line count] lines\n- data-flow SKILL.md: [line count] lines\n- Frontmatter consistency: PASS or FAIL\n- Reference files: [count] exist, [count] linked\n- Duplicate content: NONE or [details]\n- Cross-references: PASS or FAIL\n- Overall: ALL PASS or FAILURES FOUND","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-23T00:52:15Z","created_by":"ericjohnolson","updated_at":"2026-02-23T01:05:15Z","closed_at":"2026-02-23T01:05:15Z","close_reason":"Closed","labels":["agent-validate"],"dependencies":[{"issue_id":"craft-c8p","depends_on_id":"craft-5sm","type":"blocks","created_at":"2026-02-22T16:52:27Z","created_by":"ericjohnolson","metadata":"{}"},{"issue_id":"craft-c8p","depends_on_id":"craft-6i9","type":"blocks","created_at":"2026-02-22T16:52:27Z","created_by":"ericjohnolson","metadata":"{}"},{"issue_id":"craft-c8p","depends_on_id":"craft-7dd","type":"blocks","created_at":"2026-02-22T16:52:28Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-c9k","title":"LikeC4 Diagram Skills","status":"closed","priority":1,"issue_type":"epic","owner":"ericjolson@gmail.com","created_at":"2026-02-23T00:51:37Z","created_by":"ericjohnolson","updated_at":"2026-02-23T01:05:16Z","closed_at":"2026-02-23T01:05:16Z","close_reason":"Closed","dependencies":[{"issue_id":"craft-c9k","depends_on_id":"craft-5sm","type":"parent-child","created_at":"2026-02-22T16:52:20Z","created_by":"ericjohnolson","metadata":"{}"},{"issue_id":"craft-c9k","depends_on_id":"craft-6i9","type":"parent-child","created_at":"2026-02-22T16:52:21Z","created_by":"ericjohnolson","metadata":"{}"},{"issue_id":"craft-c9k","depends_on_id":"craft-7dd","type":"parent-child","created_at":"2026-02-22T16:52:21Z","created_by":"ericjohnolson","metadata":"{}"},{"issue_id":"craft-c9k","depends_on_id":"craft-c8p","type":"parent-child","created_at":"2026-02-22T16:52:21Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-ca6","title":"P3: Functional Scenarios — research \u0026 draft skills","description":"## Agent Task: Functional Scenarios — Research and Draft (Phase 3)\n\n**Role:** Add functional test scenarios (Given/When/Then) for the two artifact-producing planning skills.\n\n### Agent Context\n- **Files to modify:** `tests/scenarios/research.yaml`, `tests/scenarios/draft.yaml`\n- **Files to read:** `docs/plans/2026-02-23-skill-testing-research.md` (Testable Contracts section), `plugins/crafter/skills/research/SKILL.md`, `plugins/crafter/skills/draft/SKILL.md`, `tests/README.md` (YAML format spec), `tests/rubrics/structured-output.md` (if exists)\n- **Acceptance gate:** Both YAML files have `functional[]` section with 3+ scenarios each; assertions include grading method (code-check or llm-judge)\n- **Constraints:** Assertions must be behavioral (what the output contains/looks like), not procedural (what steps Claude took)\n\n### Research Skill — Testable Contracts\n- Output file exists at `docs/plans/YYYY-MM-DD-{topic}-research.md`\n- Contains sections: Summary, Relevant Files, Existing Patterns, Web Research (with confidence levels), Open Questions, Next Steps\n- Target ~200 lines\n- All agents dispatched in a single message (parallel)\n- AskUserQuestion called for user review\n- Hard stop after presenting next steps (no code, no planning)\n\n### Draft Skill — Testable Contracts\n- Output file exists at `docs/plans/YYYY-MM-DD-{topic}-plan.md`\n- Contains Agent Context blocks per phase\n- Beads task graph created (or inline task graph if beads unavailable)\n- Each beads issue is self-contained (does not reference plan file)\n- TDD phases have 3 issues each (test/impl/validate)\n\n### Instructions\n1. Read tests/README.md for the YAML format spec\n2. Read research artifact Testable Contracts section for assertion targets\n3. Read each skills SKILL.md for workflow details\n4. For research: write 3+ functional scenarios covering output structure, section presence, web research handling, parallel dispatch, hard stop behavior\n5. For draft: write 3+ functional scenarios covering plan file structure, Agent Context blocks, beads graph creation, TDD decomposition\n6. Each scenario: Given (setup), When (invocation), Then (assertions with grading: code-check or llm-judge)\n\n### Report\n- Scenarios added per skill: [count]\n- Grading methods used: [list]\n- Acceptance gate status: PASS or FAIL","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-24T18:12:36Z","created_by":"ericjohnolson","updated_at":"2026-02-24T19:55:28Z","closed_at":"2026-02-24T19:55:28Z","close_reason":"Closed","labels":["no-test","rpi-phase"],"dependencies":[{"issue_id":"craft-ca6","depends_on_id":"craft-a98","type":"blocks","created_at":"2026-02-24T10:12:48Z","created_by":"ericjohnolson","metadata":"{}"},{"issue_id":"craft-ca6","depends_on_id":"craft-b83","type":"parent-child","created_at":"2026-02-24T10:12:54Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-cay","title":"P1: Create Diagram Skill","description":"## Agent Task: Create Diagram Skill (Phase 1)\n\n**Role:** Author the unified diagram SKILL.md with subtype dispatch table and copy reference files.\n\n### Agent Context\n- **Files to create:**\n  - `plugins/crafter/skills/diagram/SKILL.md`\n  - `plugins/crafter/skills/diagram/references/likec4-c4/dsl-syntax.md`\n  - `plugins/crafter/skills/diagram/references/likec4-c4/view-examples.md`\n  - `plugins/crafter/skills/diagram/references/likec4-c4/style-guide.md`\n  - `plugins/crafter/skills/diagram/references/likec4-dynamic/dsl-syntax.md`\n  - `plugins/crafter/skills/diagram/references/likec4-dynamic/flow-examples.md`\n  - `plugins/crafter/skills/diagram/references/data-flow/dfd-notation.md`\n  - `plugins/crafter/skills/diagram/references/data-flow/dfd-examples.md`\n- **Files to read:** `plugins/scaffolder/skills/likec4-c4/SKILL.md`, `plugins/scaffolder/skills/likec4-dynamic/SKILL.md`, `plugins/scaffolder/skills/data-flow/SKILL.md`, all their reference files\n- **SKILL.md requirements:**\n  - Crafter-style frontmatter: `name: diagram`, `description`, flat `triggers` list (union of all 3 skills), `allowed-tools: Read Glob Write`\n  - Subtype dispatch table mapping user intent → subtype → reference directory\n  - Shared 6-step workflow (gather context → check existing → select subtype → load references → generate → review)\n  - Explicit instruction: \"After selecting the subtype, use the Read tool to load ALL markdown files from `references/{subtype}/`\"\n  - View type decision tree from likec4-c4 expanded to include data-flow routing\n  - Under 300 lines\n- **Reference files:** Copy verbatim from scaffolder source — content unchanged, only location changes\n- **Acceptance gate:** SKILL.md has correct frontmatter, dispatch table with 3 subtypes, shared workflow; all 8 reference files present; line count ≤ 300","status":"closed","priority":1,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-23T18:51:52Z","created_by":"ericjohnolson","updated_at":"2026-02-23T21:10:53Z","closed_at":"2026-02-23T21:10:53Z","close_reason":"Closed","labels":["no-test","rpi-phase"],"dependencies":[{"issue_id":"craft-cay","depends_on_id":"craft-5v2","type":"parent-child","created_at":"2026-02-23T10:52:02Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-cj8","title":"P4: Update Documentation","description":"## Agent Task: Update Documentation (Phase 4)\n\n**Role:** Align all documentation with the new three-layer testing model.\n\n### Agent Context\n- **Files to modify:** `tests/README.md`, `AGENTS.md` (lines 103-178), `docs/architecture.md` (line 5)\n- **Files to read:** `tests/local/validate-skills.sh` (for accurate command references), `tests/evals/README.md`\n- **Acceptance gate:** All three files updated; no stale references to old runner; `grep -r \"run-scenarios\" .` returns no results\n- **Architectural constraints:** Preserve existing content that remains accurate (YAML format spec, rubric documentation, Claude A/B method). Only update what changed.\n\n### Tasks\n1. **`tests/README.md`** — Rewrite to describe:\n   - Three-layer model (deterministic → Promptfoo evals → human review)\n   - How to run local tests (`bash tests/local/validate-skills.sh`)\n   - How to run evals (link to `tests/evals/README.md`)\n   - YAML scenario format (preserve existing documentation)\n   - Grading tiers (preserve existing documentation)\n2. **`AGENTS.md`** — Update:\n   - \"Testing Skills\" section: reference local runner for structure/triggers, Promptfoo for functional/behavioral\n   - \"Pre-Ship Checklist\" Testing subsection: require `validate-skills.sh` pass, recommend Promptfoo eval\n3. **`docs/architecture.md`** — Update line about \"no test suite\" to describe the deterministic test suite and eval pipeline\n\n### Instructions\n1. Read current versions of all three files\n2. Read the new test runner and eval README for accurate references\n3. Update each file, preserving content that is still accurate\n4. Verify no references to `run-scenarios.sh` remain\n\n### Report\n- Files modified: [list]\n- Stale references removed: [count]\n- `grep -r \"run-scenarios\" .` result: [output]","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-25T19:53:28Z","created_by":"ericjohnolson","updated_at":"2026-02-25T20:17:14Z","closed_at":"2026-02-25T20:17:14Z","close_reason":"Updated tests/README.md, AGENTS.md, docs/architecture.md. Three-layer model documented. Zero stale run-scenarios references in operational docs.","labels":["no-test","rpi-phase"],"dependencies":[{"issue_id":"craft-cj8","depends_on_id":"craft-aao","type":"blocks","created_at":"2026-02-25T11:53:36Z","created_by":"ericjohnolson","metadata":"{}"},{"issue_id":"craft-cj8","depends_on_id":"craft-ece","type":"blocks","created_at":"2026-02-25T11:53:37Z","created_by":"ericjohnolson","metadata":"{}"},{"issue_id":"craft-cj8","depends_on_id":"craft-r68","type":"blocks","created_at":"2026-02-25T11:53:37Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-dnj","title":"P1: Create SKILL.md with scaffolder frontmatter","description":"## Agent Task: Create SKILL.md (Phase 1)\n\n**Role:** Create the main scaffold-ts skill file with correct scaffolder frontmatter and core content.\n\n### Agent Context\n- **Files to create:** plugins/scaffolder/skills/scaffold-ts/SKILL.md\n- **Files to read:** plugins/scaffolder/skills/adr/SKILL.md (frontmatter pattern), plugins/scaffolder/skills/hexagonal-architecture/SKILL.md (architecture skill pattern)\n- **Content sections:** Derivation guide, project structure diagram, architectural rules, application service conventions, TDD workflow, naming conventions table, TypeScript compiler constraints, verification steps, reference links\n- **Frontmatter:** name: scaffold-ts, description (scaffold DDD TypeScript from Gherkin), license: MIT, compatibility: Claude Code plugin, metadata (author: eric-olson, version: 1.0.0, workflow: scaffolding, triggers), allowed-tools: Read Glob Write Bash\n- **Acceptance gate:** File exists, has correct scaffolder frontmatter, is under 300 lines, contains all core sections, links to references/fitness-tests.md and references/code-templates.md\n- **Architectural constraints:** Must follow scaffolder frontmatter convention exactly","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-23T06:26:15Z","created_by":"ericjohnolson","updated_at":"2026-02-23T06:33:12Z","closed_at":"2026-02-23T06:33:12Z","close_reason":"SKILL.md created at 139 lines with all sections and correct frontmatter","labels":["no-test","rpi-phase"]}
{"id":"craft-doy","title":"Skill Testing Refactor","description":"Three-layer testing model: deterministic local tests, Promptfoo LLM evals, manual review. Replaces 754-line bash runner.","status":"closed","priority":2,"issue_type":"epic","owner":"ericjolson@gmail.com","created_at":"2026-02-25T19:52:40Z","created_by":"ericjohnolson","updated_at":"2026-02-26T02:20:01Z","closed_at":"2026-02-26T02:20:01Z","close_reason":"All 6 children closed. Three-layer testing pipeline shipped: deterministic validator, Promptfoo evals, CI workflow, docs updated, old runner deleted."}
{"id":"craft-e9p","title":"Commit enriched AGENTS.md and plan artifacts","description":"Stage and commit: AGENTS.md, docs/plans/2026-02-23-enrich-agents-md-research.md, docs/plans/2026-02-23-enrich-agents-md-plan.md. Push to remote.","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-24T00:11:49Z","created_by":"ericjohnolson","updated_at":"2026-02-24T00:17:34Z","closed_at":"2026-02-24T00:17:34Z","close_reason":"Committed and pushed: 2015ea9","labels":["no-test","rpi-phase"],"dependencies":[{"issue_id":"craft-e9p","depends_on_id":"craft-ms2","type":"blocks","created_at":"2026-02-23T16:11:53Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-ece","title":"P2: Create Promptfoo Eval Configuration","description":"## Agent Task: Create Promptfoo Eval Configuration (Phase 2)\n\n**Role:** Wire existing scenario YAMLs to Promptfoo for LLM eval tier.\n\n### Agent Context\n- **Files to create:** `tests/evals/promptfooconfig.yaml`, `tests/evals/README.md`\n- **Files to read:** `tests/scenarios/*.yaml`, `tests/rubrics/behavioral.md`, `tests/rubrics/structured-output.md`\n- **Commands to run:** `cd tests/evals \u0026\u0026 promptfoo eval --dry-run` (if promptfoo installed)\n- **Acceptance gate:** Config is valid YAML; dry-run does not error; README covers prerequisites, usage, and adding scenarios\n- **Architectural constraints:** Config only — no custom code. Reference existing scenario YAMLs as data source. Promptfoo is the only new dependency (dev-only, not committed to repo deps).\n\n### Tasks\n1. Create `tests/evals/promptfooconfig.yaml` with:\n   - Provider: `claude` CLI\n   - Test cases derived from 5 existing scenario YAML files (24 functional scenarios)\n   - `llm-rubric` assertion type for 10 llm-judge scenarios\n   - `contains`/`icontains`/`regex` assertions for 14 code-graded scenarios\n   - Reference to rubric files for judge prompt templates\n2. Create `tests/evals/README.md` with:\n   - Prerequisites (`npm install -g promptfoo`)\n   - How to run evals (`promptfoo eval`)\n   - How to view results (`promptfoo view`)\n   - Cost expectations and recommended frequency\n   - How to add new eval scenarios\n\n### Instructions\n1. Read all 5 scenario YAML files to extract functional test cases\n2. Read both rubric files to understand grading criteria\n3. Translate each scenario into Promptfoo test case format\n4. Write the config and README\n5. Run dry-run validation if promptfoo is installed\n\n### Report\n- Config file: tests/evals/promptfooconfig.yaml\n- Test case count: [number]\n- README: tests/evals/README.md\n- Dry-run result: PASS/SKIP (if promptfoo not installed)","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-25T19:53:27Z","created_by":"ericjohnolson","updated_at":"2026-02-25T20:15:15Z","closed_at":"2026-02-25T20:15:15Z","close_reason":"Config at tests/evals/promptfooconfig.yaml with 24 test cases (13 code, 11 llm-judge). README at tests/evals/README.md.","labels":["no-test","rpi-phase"],"dependencies":[{"issue_id":"craft-ece","depends_on_id":"craft-aao","type":"blocks","created_at":"2026-02-25T11:53:36Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-ed8","title":"P3: Migrate Standalone Skills","description":"## Agent Task: Migrate Standalone Skills (Phase 3)\n\n**Role:** Move hexagonal-architecture and adr from scaffolder to crafter, normalizing frontmatter.\n\n### Agent Context\n- **Files to create (copy + modify frontmatter):**\n  - `plugins/crafter/skills/hexagonal-architecture/SKILL.md` (normalize frontmatter)\n  - `plugins/crafter/skills/hexagonal-architecture/references/disclaimer.md` (copy verbatim)\n  - `plugins/crafter/skills/adr/SKILL.md` (normalize frontmatter)\n  - `plugins/crafter/skills/adr/references/template.md` (copy verbatim)\n  - `plugins/crafter/skills/adr/references/philosophy.md` (copy verbatim)\n  - `plugins/crafter/skills/adr/references/comparison.md` (copy verbatim)\n- **Files to read:** `plugins/scaffolder/skills/hexagonal-architecture/SKILL.md`, `plugins/scaffolder/skills/adr/SKILL.md`, all their reference files\n- **Frontmatter normalization:** Remove `license`, `compatibility`, `metadata.author/version/workflow` nesting. Convert to flat crafter style:\n  ```yaml\n  name: \u003cskill-name\u003e\n  description: \u003cdescription\u003e\n  triggers:\n    - \"trigger 1\"\n  allowed-tools: \u003ctools\u003e\n  ```\n- **Body content:** Unchanged — only frontmatter is modified\n- **Reference files:** Copy verbatim\n- **Acceptance gate:** Both skills exist under `plugins/crafter/skills/` with crafter-style frontmatter; all reference files intact","status":"closed","priority":1,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-23T18:51:53Z","created_by":"ericjohnolson","updated_at":"2026-02-23T21:10:53Z","closed_at":"2026-02-23T21:10:53Z","close_reason":"Closed","labels":["no-test","rpi-phase"],"dependencies":[{"issue_id":"craft-ed8","depends_on_id":"craft-5v2","type":"parent-child","created_at":"2026-02-23T10:52:03Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-egf","title":"P6: Verification","description":"## Agent Task: Final Verification (Phase 6)\n\n**Role:** Run the full test suite and verify all acceptance criteria.\n\n### Agent Context\n- **Full test command:** `bash tests/local/validate-skills.sh`\n- **Acceptance gate:** All acceptance criteria from the plan verified\n\n### Tasks\n1. Run `bash tests/local/validate-skills.sh` — all checks pass\n2. Run `promptfoo eval --dry-run` in `tests/evals/` (if installed) — config valid\n3. Verify no stale references: `grep -r \"run-scenarios\" .` returns nothing\n4. Review GitHub Actions workflow for correctness\n5. Confirm all acceptance criteria met:\n   - [ ] Deterministic local tests validate all 12 skill structures\n   - [ ] Deterministic local tests validate all 5 existing YAML scenario schemas\n   - [ ] Trigger phrases tested via regex (no API calls)\n   - [ ] Promptfoo config wired to existing scenario YAMLs\n   - [ ] GitHub Actions workflow runs deterministic tests on push\n   - [ ] Old runner deleted\n   - [ ] Documentation updated\n   - [ ] All deterministic tests pass\n\n### Instructions\n1. Run the local test suite\n2. Check for stale references\n3. Report on each acceptance criterion\n\n### Report\n- Local tests: PASS/FAIL\n- Promptfoo dry-run: PASS/SKIP/FAIL\n- Stale references: NONE/[list]\n- Acceptance criteria: [checklist with status]","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-25T19:53:29Z","created_by":"ericjohnolson","updated_at":"2026-02-25T20:18:26Z","closed_at":"2026-02-25T20:18:26Z","close_reason":"All 8 acceptance criteria verified. 217 deterministic checks run. 0 stale references. All infrastructure working.","labels":["no-test","rpi-phase"],"dependencies":[{"issue_id":"craft-egf","depends_on_id":"craft-7td","type":"blocks","created_at":"2026-02-25T11:53:38Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-ejo","title":"Enrich AGENTS.md with Anthropic best practices","description":"Enrich the project AGENTS.md with high-value tips from Anthropic's official skill authoring and testing documentation. Research and initial write already complete. Needs validation and commit.","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-24T00:11:37Z","created_by":"ericjohnolson","updated_at":"2026-02-24T00:12:54Z","closed_at":"2026-02-24T00:12:54Z","close_reason":"AGENTS.md enriched during research phase (55→200 lines). File already on disk.","labels":["rpi-phase"]}
{"id":"craft-j51","title":"P5: Functional Scenarios — reflect skill (Category B, LLM-judge)","description":"## Agent Task: Functional Scenarios — Reflect (Phase 5)\n\n**Role:** Add functional test scenarios for the behavioral/interactive skill requiring LLM-judge grading.\n\n### Agent Context\n- **Files to modify:** `tests/scenarios/reflect.yaml`\n- **Files to read:** `docs/plans/2026-02-23-skill-testing-research.md` (Testable Contracts section), `plugins/crafter/skills/reflect/SKILL.md`, `tests/README.md` (YAML format spec)\n- **Acceptance gate:** YAML file has `functional[]` with 3+ scenarios; at least 1 scenario uses `grading: llm-judge` with a judge prompt that includes scoring criteria and pass/fail threshold\n- **Constraints:** LLM-judge prompts must include scoring criteria (pass/fail threshold) — not open-ended\n\n### Reflect Skill — Testable Contracts\n- 4 parallel agents dispatched before plan mode\n- Artifact contains Agent Dispatch Manifest table\n- Max 5 improvement proposals, priority-ordered\n- Each proposal has: Type, Priority (P1-P3), Target file, Current/Proposed/Rationale\n- Atomic commits per approved proposal prefixed `reflect:`\n\n### Instructions\n1. Read tests/README.md for YAML format spec\n2. Read research artifact Testable Contracts section for reflect\n3. Read reflect SKILL.md for workflow details\n4. Write 3+ functional scenarios:\n   - Scenario testing parallel dispatch and manifest table (code-check: table exists, 4 rows)\n   - Scenario testing proposal structure (code-check: max 5, has required fields)\n   - Scenario testing proposal quality/relevance (llm-judge: are proposals actionable and relevant to the session?)\n5. For LLM-judge scenarios, include: judge prompt, scoring dimensions, pass threshold\n\n### Report\n- Scenarios added: [count]\n- LLM-judge scenarios: [count with judge prompt details]\n- Acceptance gate status: PASS or FAIL","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-24T18:12:37Z","created_by":"ericjohnolson","updated_at":"2026-02-24T19:55:28Z","closed_at":"2026-02-24T19:55:28Z","close_reason":"Closed","labels":["no-test","rpi-phase"],"dependencies":[{"issue_id":"craft-j51","depends_on_id":"craft-a98","type":"blocks","created_at":"2026-02-24T10:12:49Z","created_by":"ericjohnolson","metadata":"{}"},{"issue_id":"craft-j51","depends_on_id":"craft-b83","type":"parent-child","created_at":"2026-02-24T10:12:55Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-leh","title":"Fix: trigger test probe prompt doesn't test actual skill loading","description":"## Problem\n\nThe current trigger test approach sends a meta-question to `claude --print`:\n\n```\nWhen would you use the research skill? Now, given that, would you activate it for this input: \"...\" — respond with only YES or NO.\n```\n\nThis tests whether Claude *thinks* it would use the skill, not whether the skill actually loads. The `--print` flag runs Claude in a stateless mode without plugins installed, so no skills are available regardless.\n\nReal trigger testing requires the skill to be installed and the plugin system active. The correct approach would be one of:\n1. Use `claude` (interactive mode) with the plugin installed, send the phrase, and check if the skill was loaded in the output\n2. Use the Claude API directly with the skill description injected as a system prompt, and ask Claude to classify the phrase\n3. Accept that trigger testing is a manual/observational process and mark these as `--dry-run` only scenarios with instructions for manual verification\n\n## Impact\n\nAll trigger tests (positive and negative across all 5 skills) will always fail with the current approach because `--print` mode has no skill context.\n\n## Files\n- `tests/runner/run-scenarios.sh` — `_run_single_trigger_test()` function (lines 260-322)","status":"closed","priority":1,"issue_type":"bug","owner":"ericjolson@gmail.com","created_at":"2026-02-24T21:53:27Z","created_by":"ericjohnolson","updated_at":"2026-02-24T21:56:47Z","closed_at":"2026-02-24T21:56:47Z","close_reason":"Closed"}
{"id":"craft-ms2","title":"Validate enriched AGENTS.md for consistency","description":"Cross-reference enriched AGENTS.md against CLAUDE.md and docs/architecture.md. Verify no contradictions on line limits, frontmatter format, naming conventions, or skill structure. Spot-check 2-3 existing skills against the new checklist. Resolve any conflicts by adjusting AGENTS.md.","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-24T00:11:43Z","created_by":"ericjohnolson","updated_at":"2026-02-24T00:15:37Z","closed_at":"2026-02-24T00:15:37Z","close_reason":"Validation complete. 3 fixes applied: triggers placement warning, scripts/ dir removed, redundancy reduced with canonical source links.","labels":["no-test","rpi-phase"],"dependencies":[{"issue_id":"craft-ms2","depends_on_id":"craft-ejo","type":"blocks","created_at":"2026-02-23T16:11:53Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-r68","title":"P3: Create GitHub Actions CI Workflow","description":"## Agent Task: Create GitHub Actions CI Workflow (Phase 3)\n\n**Role:** Create a CI workflow that gates pushes with deterministic skill validation.\n\n### Agent Context\n- **Files to create:** `.github/workflows/test-skills.yml`\n- **Files to read:** `.github/workflows/bump-versions.yml` (follow existing patterns)\n- **Commands to run:** None required locally — validation is structural\n- **Acceptance gate:** Valid GitHub Actions YAML; triggers on push/PR; installs `yq`; runs `tests/local/validate-skills.sh`\n- **Architectural constraints:** Minimal workflow. No secrets needed. No Promptfoo — evals run separately.\n\n### Tasks\n1. Create `.github/workflows/test-skills.yml`:\n   - Trigger: push to any branch, PR to main\n   - Install `yq` via action or apt-get\n   - Run `bash tests/local/validate-skills.sh`\n   - Fail the workflow if script exits non-zero\n2. Keep it minimal — no caching, no matrix, no Promptfoo\n\n### Instructions\n1. Read `.github/workflows/bump-versions.yml` to follow existing patterns\n2. Write the workflow YAML\n3. Verify YAML syntax is valid\n\n### Report\n- Workflow file: .github/workflows/test-skills.yml\n- Triggers: push (all branches), PR (main)\n- Steps: install yq, run validate-skills.sh","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-25T19:53:28Z","created_by":"ericjohnolson","updated_at":"2026-02-25T20:15:15Z","closed_at":"2026-02-25T20:15:15Z","close_reason":"Workflow at .github/workflows/test-skills.yml. Triggers on push (all branches) and PR to main. Installs yq and runs validate-skills.sh.","labels":["no-test","rpi-phase"],"dependencies":[{"issue_id":"craft-r68","depends_on_id":"craft-aao","type":"blocks","created_at":"2026-02-25T11:53:36Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-uuf","title":"scaffold-ts skill","description":"Epic: Create scaffold-ts skill for scaffolder plugin — DDD TypeScript project scaffolding from Gherkin feature files","status":"closed","priority":2,"issue_type":"feature","owner":"ericjolson@gmail.com","created_at":"2026-02-23T06:25:56Z","created_by":"ericjohnolson","updated_at":"2026-02-23T06:35:01Z","closed_at":"2026-02-23T06:35:01Z","close_reason":"All 3 phases complete, skill structure verified"}
{"id":"craft-vh6","title":"P7: Automation Scaffold — test runner script","description":"## Agent Task: Automation Scaffold (Phase 7)\n\n**Role:** Create a shell script that reads YAML scenarios and invokes Claude CLI for automated testing.\n\n### Agent Context\n- **Files to create:** `tests/runner/run-scenarios.sh`\n- **Files to read:** `tests/README.md` (YAML format spec), completed scenario files in `tests/scenarios/`, `tests/rubrics/structured-output.md`\n- **Acceptance gate:** `./tests/runner/run-scenarios.sh --dry-run --skill research` lists all scenarios for research without invoking API; script is executable (`chmod +x`)\n- **Constraints:** Use `claude` CLI for invocation (not raw API); keep dependencies minimal (bash + yq for YAML parsing); no Python required\n\n### Instructions\n1. Read tests/README.md for YAML format spec\n2. Read one completed scenario file to understand data structure\n3. Read structured-output rubric for automatable check patterns\n4. Create `tests/runner/run-scenarios.sh` that:\n   - Accepts flags: `--skill \u003cname\u003e`, `--type trigger|functional`, `--dry-run`, `--verbose`\n   - Reads scenario YAML files using `yq`\n   - For trigger tests: sends each phrase to `claude` CLI and checks if skill was loaded\n   - For functional tests: sends scenario setup to `claude` CLI, captures output, runs code-based grading checks from rubric\n   - Reports pass/fail per scenario with summary\n   - Supports `--dry-run` mode that prints what would be tested without invoking API\n5. Make script executable\n6. Test with `--dry-run` flag\n\n### Report\n- Files created: [list paths]\n- Flags supported: [list]\n- Dry-run output: [paste sample]\n- Acceptance gate status: PASS or FAIL","status":"closed","priority":2,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-24T18:12:38Z","created_by":"ericjohnolson","updated_at":"2026-02-24T20:00:58Z","closed_at":"2026-02-24T20:00:58Z","close_reason":"Closed","labels":["no-test","rpi-phase"],"dependencies":[{"issue_id":"craft-vh6","depends_on_id":"craft-3b3","type":"blocks","created_at":"2026-02-24T10:12:50Z","created_by":"ericjohnolson","metadata":"{}"},{"issue_id":"craft-vh6","depends_on_id":"craft-b83","type":"parent-child","created_at":"2026-02-24T10:12:56Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-z7r","title":"P2: Create Scaffold Skill","description":"## Agent Task: Create Scaffold Skill (Phase 2)\n\n**Role:** Author the unified scaffold SKILL.md with language dispatch table and copy reference files.\n\n### Agent Context\n- **Files to create:**\n  - `plugins/crafter/skills/scaffold/SKILL.md`\n  - `plugins/crafter/skills/scaffold/references/typescript/code-templates.md`\n  - `plugins/crafter/skills/scaffold/references/typescript/fitness-tests.md`\n- **Files to read:** `plugins/scaffolder/skills/scaffold-ts/SKILL.md`, its reference files\n- **SKILL.md requirements:**\n  - Crafter-style frontmatter: `name: scaffold`, `description`, flat `triggers` list (scaffold, scaffold typescript, scaffold ts, DDD typescript, scaffold project, domain-driven), `allowed-tools: Read Glob Write Bash`\n  - Language dispatch table mapping user intent → language subtype → reference directory\n  - Shared workflow abstracted from TypeScript-specific details (the shared workflow covers: read feature files → identify contexts → extract entities → scaffold structure → wire dependencies → verify)\n  - Explicit instruction: \"After selecting the language subtype, use the Read tool to load ALL markdown files from `references/{language}/`\"\n  - Under 300 lines\n- **Reference files:** Copy verbatim from scaffolder source — content unchanged, only location changes\n- **Acceptance gate:** SKILL.md has correct frontmatter, dispatch table with typescript subtype, shared workflow; 2 reference files present; line count ≤ 300","status":"closed","priority":1,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-23T18:51:53Z","created_by":"ericjohnolson","updated_at":"2026-02-23T21:10:53Z","closed_at":"2026-02-23T21:10:53Z","close_reason":"Closed","labels":["no-test","rpi-phase"],"dependencies":[{"issue_id":"craft-z7r","depends_on_id":"craft-5v2","type":"parent-child","created_at":"2026-02-23T10:52:02Z","created_by":"ericjohnolson","metadata":"{}"}]}
{"id":"craft-zr0","title":"P6: Final Verification","description":"## Agent Task: Final Verification (Phase 6)\n\n**Role:** Verify the complete consolidation — all skills present, structure correct, no orphaned references.\n\n### Agent Context\n- **Checks to perform:**\n  1. List all skill directories under `plugins/crafter/skills/` — expect exactly 12\n  2. Verify each SKILL.md has valid YAML frontmatter with `name` and `description` fields\n  3. Verify each referenced file in SKILL.md actually exists on disk\n  4. Confirm `.claude-plugin/marketplace.json` is valid JSON with single plugin at v2.0.0\n  5. Grep for any remaining `scaffolder` references in all files (should be zero outside docs/plans/)\n  6. Verify all diagram reference files: 3 in likec4-c4, 2 in likec4-dynamic, 2 in data-flow\n  7. Verify all scaffold reference files: 2 in typescript\n  8. Verify hexagonal-architecture and adr reference files intact\n- **Acceptance gate:** All checks pass; all acceptance criteria from plan verified; no orphaned scaffolder references","status":"closed","priority":1,"issue_type":"task","owner":"ericjolson@gmail.com","created_at":"2026-02-23T18:51:55Z","created_by":"ericjohnolson","updated_at":"2026-02-23T21:19:12Z","closed_at":"2026-02-23T21:19:12Z","close_reason":"Closed","labels":["agent-validate","rpi-phase"],"dependencies":[{"issue_id":"craft-zr0","depends_on_id":"craft-2eq","type":"blocks","created_at":"2026-02-23T10:52:06Z","created_by":"ericjohnolson","metadata":"{}"},{"issue_id":"craft-zr0","depends_on_id":"craft-5v2","type":"parent-child","created_at":"2026-02-23T10:52:04Z","created_by":"ericjohnolson","metadata":"{}"}]}
